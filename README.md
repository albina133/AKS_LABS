<img width="1915" height="464" alt="image" src="https://github.com/user-attachments/assets/cdb054a6-8f75-4246-bd16-6dcdc574f20e" /># Выполнение практических заданий по дисциплине "Архитектура корпоративных систем" <br>
## Практическая работа №1 <br> Приложение с типовой архитектурой JakartaEE <br>
**Общее задание**<br>
Вам необходимо разработать приложение, используя типовую архитектуру и технологии JakartaEE. Оно должно иметь три слоя (данные, логика, представление) и предоставлять средства для работы с базой данных (включая добавление, редактирование и удаление данных).<br>
Настоятельно рекомендуется использовать систему контроля версий и управления исходным кодом (например, GitHub).<br>
Вы можете выбрать любую IDE.<br>
Но вы не можете использовать IDE для развёртывания проекта на сервере приложений. Развёртывание следует выполнять через консоль администратора или конфигурационные файлы сервера приложений.<br>
**Задание 1**<br>
Скачайте сервер приложений GlassFish или иной доступный вам сервер приложений.<br>
Установите его.<br>
Запустите сервер приложений.<br>
Откройте консоль администратора и ознакомьтесь с её элементами управления.<br>
**Задание 2**<br>
Если у вас не установлена СУБД, установите её. Вы можете выбрать любую реляционную СУБД, но предпочтительна PostgreSQL.<br>
**Задание 3**<br>
Выберите любую предметную область и разработайте модель, содержащую как минимум две сущности с несколькими свойствами. Сформируйте скрипт для создания и заполнения базы данных для вашей модели.<br>
**Задание 4**<br>
Разработайте слой данных в виде Java Beans для вашей модели и подготовьте их к использованию с Entity Persistence.<br>
**Задание 5**<br>
Реализуйте бизнес-слой на основе сессионных EJB-компонентов для доступа к данным и их редактирования.<br>
**Задание 6**<br>
Реализуйте слой представления, используя любую подходящую технологию на ваш выбор.<br>
**Задание 7**<br>
Добейтесь того, чтобы всё это вместе заработало…<br>
## Описание проделанной работы: <br>
Административная консоль сервера приложений GlassFish: <br>
<img width="1919" height="1041" alt="image" src="https://github.com/user-attachments/assets/f6fc8358-79e5-4ebc-ae18-f0ddaecc408a" /> <br>
Развернутое на сервере GlassFish веб-приложение jakarta_lab1_Volkova_Kandalov: <br>
<img width="1417" height="177" alt="image" src="https://github.com/user-attachments/assets/f9b63d70-c1a7-476c-977b-3f8e7c4fdb6c" /> <br>
Настроенный пул соединений PostgresPool и успешная проверка подключения к СУБД: <br>
<img width="1919" height="884" alt="image" src="https://github.com/user-attachments/assets/d5cdf427-e1be-4cbf-9578-bb58de387e84" /> <br>
JDBC-ресурс jdbc/jakarta_lab1DS, использующий пул соединений PostgresPool: <br>
<img width="1917" height="553" alt="image" src="https://github.com/user-attachments/assets/5e951a5d-16d8-44ff-ad3f-77cbe21eeaf5" /> <br>
Структура слоя данных и бизнес-слоя приложения (JPA-сущности Student и Course, EJB-компоненты StudentService и CourseService): <br>
<img width="424" height="782" alt="image" src="https://github.com/user-attachments/assets/343601e0-cf82-4fa2-9672-836f40086aed" /> <br>
Конфигурация persistence-unit jakarta_lab1PU с привязкой к JDBC-ресурсу jdbc/jakarta_lab1DS: <br>
<img width="956" height="286" alt="image" src="https://github.com/user-attachments/assets/139ca595-df9a-4a00-8431-0723669034c1" /> <br>
Реализация слоя представления на основе сервлетов (пример StudentServlet с вызовом EJB-сервиса StudentService): <br>
<img width="716" height="871" alt="image" src="https://github.com/user-attachments/assets/f79e95a3-cbfa-4d20-a91e-0579f0278871" /> <br>
JSP-страница students.jsp для отображения списка студентов и формы добавления новых записей: <br>
<img width="885" height="1009" alt="image" src="https://github.com/user-attachments/assets/5bc7196c-3302-4806-b667-95c1638015b4" /> <br>
Список студентов, получаемый из базы данных PostgreSQL через EJB и JPA (http://localhost:8080/jakarta_lab1_Volkova_Kandalov/students): <br>
<img width="844" height="417" alt="image" src="https://github.com/user-attachments/assets/aded8748-74d3-4492-a03c-734495cac204" /> <br>
Добавим нового студента для проверки работы приложения: <br>
<img width="851" height="448" alt="image" src="https://github.com/user-attachments/assets/4d01b94d-0800-4a90-a3b0-027b76a81f40" /> <br>
Страница отображения курсов (сущность Course) и форма добавления новых курсов с привязкой к студенту (http://localhost:8080/jakarta_lab1_Volkova_Kandalov/courses): <br>
<img width="983" height="445" alt="image" src="https://github.com/user-attachments/assets/905ccc12-9d62-4833-96e8-337ac4ff7919" /> <br>
Содержимое таблиц student (после добавления нового студента через приложение) и course в СУБД PostgreSQL после работы веб-приложения: <br>
<img width="748" height="441" alt="image" src="https://github.com/user-attachments/assets/bdfcbbbf-c6c6-4e41-a377-3163edce56d9" /> <br>
<img width="879" height="410" alt="image" src="https://github.com/user-attachments/assets/622ebe8a-93e3-4708-a0d5-d01242c3aa45" /> <br>

## Практическая работа №2 <br> Приложение на Spring <br>
**Общее задание** <br>
Вам необходимо разработать приложение, используя типовую архитектуру и технологии Spring. Оно должно иметь три слоя (данные, логика, представление) и предоставлять средства для работы с базой данных (включая добавление, редактирование и удаление данных). <br>
Настоятельно рекомендуется использовать систему контроля версий и управления исходным кодом (например, GitHub). <br>
Вы можете выбрать любую IDE. <br>
**Задание 1** <br>
Выберите любую предметную область и разработайте модель, содержащую как минимум две сущности с несколькими свойствами. <br>
Сформируйте скрипт для создания и заполнения базы данных для вашей модели. <br>
Да, вы можете использовать те же модели и скрипты, которые использовали ранее. <br>
**Задание 2** <br>
Разработайте слой данных в виде Java Beans для вашей модели и подготовьте их к использованию с Hibernate. <br>
Создайте дополнительные классы и файлы конфигурации Hibernate (при необходимости). <br>
**Задание 3** <br>
Реализуйте бизнес-слой на основе Spring Beans для доступа к данным и их редактирования. <br>
**Задание 4** <br>
Реализуйте слой представления с помощью Spring MVC. <br>
**Задание 5** <br>
Добейтесь того, чтобы всё это вместе заработало… <br>
## Описание проделанной работы: <br>
Успешный запуск Spring Boot приложения, подтверждающий корректную загрузку контекста, Hibernate и веб-сервера на порту 8081: <br>
<img width="973" height="510" alt="image" src="https://github.com/user-attachments/assets/fcb55468-2ee4-4a7e-a745-37d37b77115a" /> <br>
Страница отображения списка студентов, реализованная с помощью Spring MVC и Thymeleaf (данные получены из PostgreSQL через сервисный и репозиторный слои) (http://localhost:8081/students): <br>
<img width="774" height="486" alt="image" src="https://github.com/user-attachments/assets/4015f329-9705-4e28-a1a3-fdb98d69174d" /> <br>
Демонстрация добавления нового студента через Spring MVC форму и успешного сохранения данных в PostgreSQL: <br>
<img width="818" height="512" alt="image" src="https://github.com/user-attachments/assets/f5ba66f9-a70a-4b32-aed7-95471d3c7e16" /> <br>
<img width="759" height="475" alt="image" src="https://github.com/user-attachments/assets/f1c162e0-7cc8-4816-835b-09a338c4dc81" /> <br>
Форма редактирования данных студента, обрабатываемая контроллером Spring MVC и сервисным слоем (http://localhost:8081/students/edit/*ID*): <br>
<img width="837" height="327" alt="image" src="https://github.com/user-attachments/assets/fb1e5920-d634-4352-8f98-77eef18a5304" /> <br>
Успешное удаление студента (операция обрабатывается сервисом и репозиторием (Spring Data JPA), изменения сохраняются в базе данных): <br>
<img width="820" height="511" alt="image" src="https://github.com/user-attachments/assets/8bcc5730-4091-4420-940f-d759fddf4554" /> <br>
<img width="786" height="502" alt="image" src="https://github.com/user-attachments/assets/b5f63518-9afa-4d6c-807a-99f6832f94e5" /> <br>
<img width="749" height="438" alt="image" src="https://github.com/user-attachments/assets/4dc72e08-4dfa-4707-87b5-d0272d716a97" /> <br>
Страница отображения списка курсов, созданная с использованием Spring MVC и Thymeleaf (данные получены через Hibernate из PostgreSQL) (http://localhost:8081/courses): <br>
<img width="1049" height="463" alt="image" src="https://github.com/user-attachments/assets/7abc1244-e433-472c-ac0d-8ac9c6f9a7cf" /> <br>
Добавление нового курса и отображение его в списке (данные сохраняются через сервисный слой Spring и репозитории Hibernate): <br>
<img width="1037" height="493" alt="image" src="https://github.com/user-attachments/assets/92d66c12-1c05-41b6-ba16-3c64f52102b9" /> <br>
Результаты. Содержимое таблиц student и course в PostgreSQL после работы Spring-приложения (подтверждение корректной работы Hibernate, сервисного и MVC слоёв): <br>
<img width="745" height="435" alt="image" src="https://github.com/user-attachments/assets/32570c07-a615-4ef7-9a8b-ea9eddbd9ea0" /> <br>
<img width="876" height="442" alt="image" src="https://github.com/user-attachments/assets/0ef90ca7-ecc1-41d4-b86f-6e223d3072b1" /> <br>
Структура Spring-приложения, отражающая трёхслойную архитектуру (Hibernate, Spring Beans, Spring MVC + Thymeleaf): <br>
<img width="627" height="889" alt="image" src="https://github.com/user-attachments/assets/0364a019-41cb-4814-aa88-634625085f4f" /> <br>
Конфигурация подключения к PostgreSQL и Hibernate в файле application.properties: <br>
<img width="876" height="310" alt="image" src="https://github.com/user-attachments/assets/b1b248c3-d939-4453-a1d6-3e0b0293b5ca" /> <br>

## Практическая работа №3 <br> RESTful веб-сервис <br>
**Общее задание** <br>
Вам необходимо разработать приложение с внешним интерфейсом в виде REST веб-сервиса. Приложение должно предоставлять доступ к данным в базе данных (включая добавление, редактирование и удаление данных). <br>
Настоятельно рекомендуется использовать систему контроля версий и управления исходным кодом (например, GitHub). <br>
Вы можете выбрать любую IDE. <br>
**Задание 1** <br>
Сравните JAX-RS и SpringREST. Выберите один из них для своего приложения. Приведите аргументы в пользу вашего выбора. <br>
**Задание 2** <br>
Выберите одно из ваших предыдущих приложений для дальнейшей разработки. <br>
Разработайте REST API для доступа к вашим данным. <br>
**Задание 3** <br>
Реализуйте API. <br>
Оно должно поддерживать использование как XML, так и JSON (как для входных данных, так и для выходных). <br>
Подумайте, как это лучше реализовать. <br>
**Задание 4** <br>
Разработайте XSL-преобразование для ваших XML-объектов, чтобы браузер мог отображать их как HTML-страницы (включая данные объектов и навигацию к другим сущностям и их спискам), и разместите его в статической части веб-слоя. <br>
**Задание 5** <br>
Сделайте так, чтобы тег с данными об XSL-преобразовании добавлялся в начало XML-откликов REST. <br>
**Задание 6** <br>
Добейтесь того, чтобы всё это вместе заработало… <br>
## Описание проделанной работы: <br>
Для реализации REST API был выбран Spring REST, так как приложение уже разработано на основе Spring Framework. Использование Spring REST позволяет работать в рамках одного технологического стека, упростить архитектуру приложения и сократить объём конфигурации. Кроме того, Spring REST обеспечивает удобную поддержку форматов JSON и XML и хорошо интегрируется с Hibernate и базой данных PostgreSQL. <br>
В качестве основы для разработки REST API было использовано приложение, созданное в практической работе №2. Для сущностей «Студент» и «Курс» был разработан REST API, предоставляющий доступ к данным и поддерживающий операции создания, получения, обновления и удаления данных. <br>
Структура REST-контроллеров приложения: <br>
<img width="345" height="434" alt="image" src="https://github.com/user-attachments/assets/0206f96e-0a59-48d6-9636-6a29ca9f22c6" /> <br>
Реализованный REST API поддерживает работу с форматами XML и JSON. В зависимости от заголовков запроса клиент может получать и передавать данные в соответствующем формате. Корректная работа API была проверена с использованием консольной утилиты curl. <br>
Реализована поддержка JSON и XML для входных и выходных данных REST API. Проверка выполнена с помощью curl. <br>
Получение списка студентов в формате XML через REST API: <br>
<img width="964" height="244" alt="image" src="https://github.com/user-attachments/assets/a2d3f5d8-4bb6-4f1b-8ee4-fa61477e5a39" /> <br>
Получение списка студентов в формате JSON через REST API: <br>
<img width="978" height="192" alt="image" src="https://github.com/user-attachments/assets/954781a0-39f7-4f64-a157-0611e3000e54" /> <br>
Добавление нового студента через REST API (POST, JSON): <br>
<img width="619" height="180" alt="image" src="https://github.com/user-attachments/assets/5ef67b20-faf5-48bf-b303-0841a3a17aae" /> <br>
Разработаны XSL-преобразования для XML-ответов, размещены в статической части приложения. <br>
XSL-файлы для преобразования XML-ответов REST API в HTML: <br>
<img width="223" height="142" alt="image" src="https://github.com/user-attachments/assets/02e0699e-5902-4842-96cc-ce5868eb48f1" /> <br>
В XML-ответы для отображения в браузере добавлена директива xml-stylesheet, благодаря чему браузер применяет XSLT и отображает HTML. <br>
Отображение XML-ответа REST API в браузере с применением XSLT (студенты): <br>
<img width="913" height="504" alt="image" src="https://github.com/user-attachments/assets/f09b1971-1422-4607-8f94-4e97e0e09a55" /> <br>
Отображение XML-ответа REST API в браузере с применением XSLT (курсы): <br>
<img width="1099" height="410" alt="image" src="https://github.com/user-attachments/assets/7c501402-d251-47be-9257-3f8cae3b576e" /> <br>
Проверена совместная работа REST API, базы данных, JSON/XML и XSLT — приложение функционирует корректно. Успешный запуск RESTful веб-сервиса Spring Boot: <br>
<img width="856" height="513" alt="image" src="https://github.com/user-attachments/assets/d33c43f6-78a0-4b96-b039-7df3cdb969fc" /> <br>

## Практическая работа №4 <br> Java Message Service <br>
**Общее задание** <br>
Вам необходимо добавить новую функциональность в предыдущее приложение, а именно механизм журналирования и систему оповещения об изменениях. <br>
Журналирование должно предоставлять простой механизм для записи информации об изменениях в вашей системе в специальную таблицу базы данных. <br>
Система оповещения должна отправлять уведомления об изменениях в системе на указанные адреса электронной почты. <br>
Настоятельно рекомендуется использовать систему контроля версий и управления исходным кодом (например, GitHub). <br>
Вы можете выбрать любую IDE. <br>
**Задание 1** <br>
Добавьте новую таблицу в базу данных. Каждая строка должна описывать изменение информации в других таблицах вашей базы данных. Строка должна содержать информацию о типе изменения (вставка, обновление и т.д.), об изменившейся сущности (например, ее классе, идентификаторе) и о сути изменения (например, о новых значениях полей). <br>
**Задание 2** <br>
Создайте и настройте административные объекты JMS на сервере приложений. Внимательно отнеситесь к выбору типа объекта назначения. <br>
**Задание 3** <br>
Измените приложение так, чтобы оно отправляло сообщение объекту назначения каждый раз при внесении каких-либо изменений в сущности (включая добавление и удаление). Внимательно отнеситесь к выбору типа и структуры сообщения. <br>
**Задание 4** <br>
Разработайте MDB или MDP (в зависимости от вашей технологической платформы) для получения этих сообщений. Компонент MDB или MDP должен проверять тип и структуру сообщения, а затем создавать запись в специальной таблице. <br>
**Задание 5** <br>
Выберите тип событий, для которых вы хотите отправлять уведомления. Это могут быть, например, изменения конкретной сущности, изменения сущностей с именами, содержащими определенную строку, выход атрибута сущности за пределы определенных границ и т.д. <br>
**Задание 6** <br>
Разработайте MDB или MDP для получения сообщений об изменениях, проверки выбранных условий (типа события) и отправки электронных писем об изменении сущности в случае, если условия выполняются. <br>
**Задание 7** <br>
Добейтесь того, чтобы всё это вместе заработало… <br>
## Описание проделанной работы: <br>
В рамках задания была добавлена таблица audit_log, предназначенная для хранения информации об изменениях данных в системе. Таблица содержит сведения о типе операции, сущности, идентификаторе изменённой записи и данных изменения. Заполнение поля времени производится автоматически. <br>
Структура таблицы audit_log в базе данных: <br>
<img width="1209" height="393" alt="image" src="https://github.com/user-attachments/assets/ac3a3c11-3845-40b5-8aa1-6be21b4cd600" /> <br>
Был настроен JMS-брокер Apache ActiveMQ Artemis. Создан multicast-address entity.changes, к которому привязаны две очереди: audit.queue и notify.queue. Это позволяет рассылать одно сообщение сразу нескольким получателям. <br>
Список адресов в Artemis Console с адресом entity.changes: <br>
<img width="1915" height="464" alt="image" src="https://github.com/user-attachments/assets/0ac883ae-3176-40ce-84aa-1c2a1a844c60" /> <br>
Список очередей audit.queue и notify.queue, привязанных к entity.changes:
<img width="1919" height="477" alt="image" src="https://github.com/user-attachments/assets/5bf3c9e7-7eae-47ac-957a-ae92a588d696" /> <br>
Приложение было модифицировано таким образом, что при создании, обновлении и удалении сущностей Student и Course формируется JMS-сообщение с описанием события. Сообщение отправляется в topic entity.changes и далее распространяется по очередям. <br>
Успешный POST-запрос на создание студента: <br>
<img width="740" height="91" alt="image" src="https://github.com/user-attachments/assets/ccb4164b-58e2-4ad4-b4a6-8d7e4ae687c6" /> <br>
Логи приложения с получением JMS-сообщения (Notify...): <br>
<img width="975" height="160" alt="image" src="https://github.com/user-attachments/assets/f2087c4c-34de-46a9-a52e-8c123f591693" /> <br>
Был реализован JMS-listener (AuditLogListener), который получает сообщения из очереди audit.queue, извлекает данные о событии и сохраняет их в таблицу audit_log. Таким образом, обеспечено автоматическое журналирование всех изменений. <br>
Содержимое таблицы audit_log после выполнения операций INSERT и DELETE: <br>
<img width="1216" height="527" alt="image" src="https://github.com/user-attachments/assets/823e515d-5b3b-488d-865f-1ec93a048b15" /> <br>
В качестве условия для отправки уведомлений было выбрано событие удаления студента. Уведомление формируется только в случае, если тип операции - DELETE, а изменяемая сущность - Student. <br>
Лог получения события INSERT без отправки уведомления: <br>
<img width="980" height="265" alt="image" src="https://github.com/user-attachments/assets/976fcf2a-ebe2-461c-a9cf-cae658d98f93" /> <br>
Лог срабатывания условия уведомления для DELETE: <br>
<img width="847" height="225" alt="image" src="https://github.com/user-attachments/assets/bb3188fe-2877-414e-ab27-4dca1cfa88a1" /> <br>
Был реализован JMS-listener (NotifyListener), который обрабатывает сообщения из очереди notify.queue. При выполнении заданного условия формируется и отправляется email-уведомление. Для тестирования использовалась локальная (эмулированная) отправка писем без реального SMTP-сервера. <br>
Логи приложения с сообщением NOTIFY CONDITION PASSED и EMAIL SENT (FAKE):
<img width="854" height="434" alt="image" src="https://github.com/user-attachments/assets/775f1f75-8aae-4d17-8a7d-ee7b05764f5e" /> <br>
Все компоненты системы работают совместно. При изменении сущностей отправляется JMS-сообщение, оно обрабатывается несколькими listener'ами, выполняется журналирование в базе данных и формирование уведомлений. Приложение корректно функционирует в асинхронном режиме. <br>
<img width="1919" height="1038" alt="image" src="https://github.com/user-attachments/assets/07bc4f98-2f63-4eaf-9165-97224e05267d" /> <br>
